<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-to-brother" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/21/to-brother/" class="article-date">
  <time datetime="2015-05-20T16:00:00.000Z" itemprop="datePublished">2015-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/21/to-brother/">关于学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于学习">关于学习</h1><h2 id="关于杂与专">关于杂与专</h2><p>杂是博的通俗叫法，好听的叫博，比如博士，学不好的应该叫“杂士”</p>
<p>这个问题已经讨论很多年了，我的推荐的做法</p>
<ul>
<li>特定领域博，不能全领域博，人不是万能的，也没有那么多时间，合作更重要</li>
<li>专：做事尽全力去做，争取做到最好</li>
</ul>
<p>举个例子，软件行业可以是特定领域，nodejs开发可以特定领域，前端也可以是，找准自己的兴趣点</p>
<p>忌讳的是：今天ps，明天3d，到最后还只是一个小写代码的。。。</p>
<p>是不是很可悲?</p>
<p>在国外，程序员都不承认自己是屌丝，是码农，码畜，我也很不理解为啥国内是这种想法</p>
<p>工资一月几钱到一月几万，甚至更多，大家有想过差别么？</p>
<p>如果没有关系，没有有钱的爹，又不能卖肾，就努力让自己多学点，多赚点</p>
<p>我的一句名言：“没有目标的时候向钱看，有目标就向前看”</p>
<p>现在算和平年代，创业潮，崇尚技术，最好的2种选择：1）经商，2）有一种拿的出手的技术</p>
<p>另外要说的一点是：什么都想做什么都做不好</p>
<h2 id="大公司和小公司的学习差异">大公司和小公司的学习差异</h2><p>人还是要不断切换状态，聪明学习</p>
<p>在一家管理松散，到处都是混日子的公司，你最好的做法是学习，别人越是玩手段，混日子，你就越该学东西</p>
<ul>
<li>你会越来越厉害</li>
<li>技术优越感</li>
<li>一旦有事儿，你一定最快上位，那个时候就是别人求着你</li>
</ul>
<p>但如果你在一个创业公司里，你就不能这样做，此时，你至少要装的很积极，每天假装100%的时间都放到工作上</p>
<ul>
<li>创业公司输不起</li>
<li>同甘苦共富贵，不是能共富贵的就早点离开</li>
<li>创业公司的技术通常是最直接的，最容易学到精华的</li>
<li>不要排斥学不同的东西，比如做nodejs的，学学运维，学学os，没啥坏处</li>
</ul>
<p>那么这2种公司里学习的差别在那里呢？</p>
<ul>
<li>乱的公司里，找东西学，不学的是傻子</li>
<li>创业公司里把做的事儿当成学习（实战比自己玩进步的快），找东西学的是傻子</li>
</ul>
<p>再换个角度讲：谁他妈愿意带着傻子一起玩？</p>
<h2 id="IPO歪解">IPO歪解</h2><ul>
<li>i=input 输入</li>
<li>p=process 处理</li>
<li>o=output 输出</li>
</ul>
<p>这个相信大部分人都了解</p>
<p>我们在设计一个产品的时候，其实可以借鉴这个思路</p>
<p>比如i是用户创造的东西，比如发表xxx，点赞等等，是创造内容</p>
<p>p是运营的部分，纯用户创造的ugc会死的很难看，运营会精选，加入各种爆点，便于更好的玩起来</p>
<p>o是展现内容，是由用户创造 + 运营内容组成的。</p>
<p>得出的公式：（i + p）=o，对于产品的设计，数据流都是非常有帮助的。</p>
<p>另外对ipo进行分类会更有益处，思维导图非常容易出得。</p>
<p>其实“ipo”是为了真的ipo：</p>
<p>首次公开募股（Initial Public Offerings，简称IPO）：是指一家企业或公司 [1] （股份有限公司）第一次将它的股份向公众出售（首次公开发行，指股份公司首次向社会公众公开招股的发行方式）。</p>
<p>歪解ipo的目的</p>
<ul>
<li>为了说明，学到得东西有的时候是可以活用的</li>
<li>如果给知识插上想象的翅膀。。。</li>
</ul>
<h2 id="总结">总结</h2><p><img src="/css/hen.jpg" alt=""></p>
<p>一句话，没有目标的时候向钱看，有目标就向前看。</p>
<p>有时间就多学点，没坏处</p>
<p>欢迎关注我的公众号【node全栈】</p>
<p><img src="/css/node全栈-公众号.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/05/21/to-brother/" data-id="cid190g4j000uam7f8r0mgf98" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Performance Showdown- Node.js vs. io.js v2.0.0" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/02/20/Performance Showdown- Node.js vs. io.js v2.0.0/" class="article-date">
  <time datetime="2015-02-19T16:00:00.000Z" itemprop="datePublished">2015-02-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/02/20/Performance Showdown- Node.js vs. io.js v2.0.0/">如何选择nodejs和iojs？以及性能比较</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="如何选择nodejs和iojs？以及性能比较">如何选择nodejs和iojs？以及性能比较</h1><p>有朋友问我：</p>
<p>初学nodejs，但是看到很多都转移去io.js，开源中国也有份测试说io性能更好，现在两者不知如何选择，望指教</p>
<p>看看iojs的官网 <a href="https://iojs.org/en/index.html" target="_blank" rel="external">https://iojs.org/en/index.html</a></p>
<p>1.io.js is an npm compatible platform originally based on Node.js™.</p>
<p>这句话的重点在于基于nodejs，且兼容npm，所以它和node是一个根</p>
<p>2.Weekly Update – May 15th: io.js decides to join the Node Foundation</p>
<p>这句话说的是io.js绝对加入node基金会</p>
<p>这条新闻很有意思 </p>
<p><a href="https://medium.com/node-js-javascript/io-js-week-of-may-15th-9ada45bd8a28" target="_blank" rel="external">https://medium.com/node-js-javascript/io-js-week-of-may-15th-9ada45bd8a28</a></p>
<pre><code>As <span class="operator">a</span> <span class="keyword">first</span> step, we will move <span class="built_in">from</span> iojs organization <span class="built_in">to</span> nodejs organization <span class="operator">and</span> will converge joyent/node gradually. We will continue <span class="built_in">to</span> release io.js <span class="keyword">until</span> <span class="operator">the</span> convergence have done.
</code></pre><p>我们会持续发布io.js，直到收编完成。</p>
<pre><code>We will <span class="keyword">continue</span> <span class="keyword">to</span> release io.js <span class="keyword">until</span> <span class="keyword">the</span> convergence have done.
</code></pre><p>我们可以这样理解</p>
<ul>
<li>收编完成之后，还是要会回归node主分支的</li>
<li>我们是斗气，joyent那边孙子如果不让步，我们就继续闹</li>
</ul>
<p>看完了这段，估计大家已经知道怎么选择了</p>
<ul>
<li>iojs早晚是要合并到nodejs里的，只是时间和形式的问题</li>
<li>如果各位看看iojs的文档，它和nodejs的接口大部分是一样的，所以很少会有地雷</li>
</ul>
<p>下面给出一篇英文比较iojs和node的性能的文章，如果看不懂，看图就够了</p>
<p>先给出node自己的0.10和0.12的比较</p>
<p><img src="/css/2015-05-20/0.1.png" alt=""></p>
<p><img src="/css/2015-05-20/0.2.png" alt=""></p>
<h2 id="Performance_Showdown:_Node-js_vs-_io-js_v2-0-0">Performance Showdown: Node.js vs. io.js v2.0.0</h2><p>We noted with some interest the recent announcement of the io.js v2.0.0 release candidate. This community fork of node.js promises a supported version of the V8 engine, along with a greatly increased frequency of commits to master vs. the parent project.</p>
<p>As we’ve mentioned before, we’re keen on these developments as Node.js powers the Raygun API nodes, and ensuring these can handle the highest loads with the lowest possible response times is crucial to providing a great service to our users. A previous blog post benchmarked Node.js vs. io.js, and with the advent of the V2 release of the latter, we’d like to revisit those benchmarks to see how it stacks up in various situations.</p>
<h2 id="The_set_up">The set up</h2><p>Same as before, the following are synthetic micro-benchmarks, caveat emptor, huge grain of salt, etc. However, the charts do provide some interesting food for thought, and may provide a springboard for you to perform your own real-world tests, and potentially gain a significant speedup.</p>
<p>The benchmarks were conducted with identical runs through ApacheBench on a 64-bit Ubuntu VM. The configuration was 20,000 requests with a concurrency level of 100, and the test results were averaged over five runs of this.</p>
<p>We benchmarked two versions of node, and two versions of io.js. For node, v0.10.38 (the last release of the .10 branch) was compared against v0.12.2 (the absolute latest version of node.js).</p>
<p>For io.js, we compared v1.8.1, the last release on the 1.x branch against the newest v2.0.0 release.</p>
<h2 id="Raw_JSON_response">Raw JSON response</h2><p>This test involved created a simple server with the http module, and setting it to return a JSON payload on request. The results were:</p>
<p><img src="/css/2015-05-20/1.png" alt=""></p>
<p>What is interesting to note is the performance drop from node 0.10 to 0.12, which io.js corrects on the 1.x branch – but then dominates with v2.0.0.</p>
<p>When sending a raw response, in this benchmark io.js v2.0.0 has a 14% speedup over node 0.12! They’ve even managed a 5% speedup over their own previous release. Not bad at all, but there’s more we can test.</p>
<h2 id="Express-js">Express.js</h2><p>Express was and is still a very popular choice for quickly getting the backend of a web application up and running. Last time we documented some of the performance hit you take with it, but let’s see how it does under node 0.12 vs io.js v2.0.0:</p>
<p><img src="/css/2015-05-20/2.png" alt=""></p>
<p>There’s a 4.5% speedup when running this test on io.js v2.0.0 – pretty good for an older framework (considering how fast the JS ecosystem is moving)!</p>
<h2 id="Koa-js_on_Node_vs_io-js">Koa.js on Node vs io.js</h2><p>Many newer frameworks are competing for mindshare in the JS micro web framework space, however – we benchmarked some popular ones previously. One which we missed was Koa.js, which was in fact made by the authors of Express.js.</p>
<p>One of the huge benefits with Koa is that you can build code using ES6 features – including generators and the yield syntax which enable asynchronous code (no more callback hell). This benchmark was written using generators and run with the node –harmony flag enabled. The logic involved a simple bit of routing, and set the response to be an HTML fragment.</p>
<p>Let’s see how Koa does running on Node vs. io.js:</p>
<p><img src="/css/2015-05-20/3-2.png" alt=""></p>
<p>A 14.8% speedup from Node to the latest version of io.js – certainly worthy of note. If you’re looking at one of the latest generation of JS backend frameworks, it certainly pays to give io.js a look as out-of-the-box you get some rather impressive perf improvements. When running a cluster of VMs using the Node stack, depending on scale, that speedup may result in several fewer boxes needed and correspondingly less infrastructure costs – all for free.</p>
<h2 id="总结">总结</h2><p>一句话，iojs性能比较nodejs好，看好nodejs的发展。</p>
<p>欢迎关注我的公众号【node全栈】</p>
<p><img src="/css/node全栈-公众号.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/02/20/Performance Showdown- Node.js vs. io.js v2.0.0/" data-id="cid190g4k000vam7flsm2h4fw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-pre-commit-yong-fa" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/05/pre-commit-yong-fa/" class="article-date">
  <time datetime="2014-12-04T16:00:00.000Z" itemprop="datePublished">2014-12-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/05/pre-commit-yong-fa/">pre commit用法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="pre-commit用法说明">pre-commit用法说明</h1><p>Automatically install pre-commit hooks for your npm modules.</p>
<h2 id="安装">安装</h2><pre><code>npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> pre-commit
</code></pre><h2 id="示例package-json">示例package.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"xxxxx"</span></span>,</span><br><span class="line">  "<span class="attribute">version</span>": <span class="value"><span class="string">"1.0.0"</span></span>,</span><br><span class="line">  "<span class="attribute">description</span>": <span class="value"><span class="string">"xxxxx ====="</span></span>,</span><br><span class="line">  "<span class="attribute">main</span>": <span class="value"><span class="string">"index.js"</span></span>,</span><br><span class="line">  "<span class="attribute">scripts</span>": <span class="value">&#123;</span><br><span class="line">		"<span class="attribute">checkconflict</span>":<span class="value"><span class="string">"ack '&lt;&lt;&lt;&lt;&lt;&lt;&lt;'"</span></span><br><span class="line">  </span>&#125;</span>,</span><br><span class="line">  "<span class="attribute">pre-commit</span>": <span class="value">[</span><br><span class="line">     <span class="string">"checkconflict"</span></span><br><span class="line">   ]</span>,</span><br><span class="line">  "<span class="attribute">repository</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">type</span>": <span class="value"><span class="string">"git"</span></span>,</span><br><span class="line">    "<span class="attribute">url</span>": <span class="value"><span class="string">"https://github.com/i5ting/xxxxx.git"</span></span><br><span class="line">  </span>&#125;</span>,</span><br><span class="line">  "<span class="attribute">author</span>": <span class="value"><span class="string">""</span></span>,</span><br><span class="line">  "<span class="attribute">license</span>": <span class="value"><span class="string">"ISC"</span></span>,</span><br><span class="line">  "<span class="attribute">bugs</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">url</span>": <span class="value"><span class="string">"https://github.com/i5ting/xxxxx/issues"</span></span><br><span class="line">  </span>&#125;</span>,</span><br><span class="line">  "<span class="attribute">homepage</span>": <span class="value"><span class="string">"https://github.com/i5ting/xxxxx"</span></span>,</span><br><span class="line">  "<span class="attribute">devDependencies</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">pre-commit</span>": <span class="value"><span class="string">"0.0.9"</span></span><br><span class="line">  </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<p>说明</p>
<ul>
<li>pre-commit部分，说明依赖的scripts里的命令，比如例子我创建了一个checkconflict</li>
<li>当我们<code>git commit</code>的时候就调用pre-commit部分</li>
</ul>
<p>它可以干啥</p>
<ol>
<li>检查冲突</li>
<li>提交前自己先测试</li>
<li>。。。</li>
</ol>
<p>自己发挥吧</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/12/05/pre-commit-yong-fa/" data-id="cid190g4m000wam7ffubilrx8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mongoose-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/11/24/mongoose-test/" class="article-date">
  <time datetime="2014-11-23T16:00:00.000Z" itemprop="datePublished">2014-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/24/mongoose-test/">mongoose test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>this is a test example project for mongoose!</p>
<h2 id="准备工作">准备工作</h2><p>这部分主要是完成了构建项目骨架代码得任务，通过命令和少许文件更改，即可完成。</p>
<h3 id="创建项目">创建项目</h3><pre><code>express .
</code></pre><h3 id="使用更快的npm源">使用更快的npm源</h3><p>测速</p>
<pre><code>nrm <span class="built_in">test</span>
</code></pre><p>选择速度快的源</p>
<pre><code>nrm <span class="keyword">use</span> cnpm
</code></pre><h3 id="安装依赖包">安装依赖包</h3><pre><code>npm <span class="keyword">install</span>
</code></pre><h3 id="添加更多有用依赖">添加更多有用依赖</h3><pre><code>npm <span class="operator"><span class="keyword">install</span> <span class="comment">--save mongoose</span>
npm <span class="keyword">install</span> <span class="comment">--save bcrypt</span></span>
</code></pre><h3 id="安装服务器自动重载模块">安装服务器自动重载模块</h3><pre><code>npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> supervisor
</code></pre><h3 id="安装测试模块">安装测试模块</h3><pre><code>mkdir test
touch Gulpfile.js

npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> mocha
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> chai
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> sinon
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> supertest
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> zombie
</code></pre><p>单元测试需要的各个模块说明</p>
<ul>
<li>mocha（Mocha is a feature-rich JavaScript test framework running on node.js and the browser, making asynchronous testing simple and fun.）</li>
<li>chai（Chai is a BDD / TDD assertion library for node and the browser that can be delightfully paired with any javascript testing framework.）</li>
<li>sinon（Standalone test spies, stubs and mocks for JavaScript.）</li>
<li>zombie (页面事件模拟Zombie.js is a lightweight framework for testing client-side JavaScript code in a simulated environment. No browser required.)</li>
<li>supertest(接口测试 Super-agent driven library for testing node.js HTTP servers using a fluent API)</li>
</ul>
<h3 id="修改Gulpfile-js">修改Gulpfile.js</h3><ul>
<li>auto test</li>
<li>代码测试覆盖率</li>
</ul>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp</span><br><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp-mocha</span><br><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp-istanbul</span><br></pre></td></tr></table></figure>
<p>创建gulpfilejs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> istanbul = <span class="built_in">require</span>(<span class="string">'gulp-istanbul'</span>);</span><br><span class="line"><span class="keyword">var</span> mocha = <span class="built_in">require</span>(<span class="string">'gulp-mocha'</span>); </span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  gulp.src([<span class="string">'db/**/*.js'</span>])</span><br><span class="line">    .pipe(istanbul()) <span class="comment">// Covering files</span></span><br><span class="line">    .on(<span class="string">'finish'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      gulp.src([<span class="string">'test/*.js'</span>])</span><br><span class="line">        .pipe(mocha())</span><br><span class="line">        .pipe(istanbul.writeReports()) <span class="comment">// Creating the reports after tests runned</span></span><br><span class="line">        .on(<span class="string">'end'</span>, cb);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'test'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([<span class="string">'./db/**/*'</span>,<span class="string">'./test/**/*'</span>], [<span class="string">'test'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>,[<span class="string">'test'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([<span class="string">'./db/**/*'</span>,<span class="string">'./test/**/*'</span>], [<span class="string">'test'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules<span class="regexp">/.bin/gu</span>lp</span><br></pre></td></tr></table></figure>
<p>这时，你试试修改测试或源文件试试，看看会不会自动触发测试</p>
<p>当然，如果你喜欢只是测试一次，可以这样做</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">node_modules</span>/.<span class="keyword">bin/gulp </span>test</span><br></pre></td></tr></table></figure>
<p>如果你不熟悉gulp，可以再这里<a href="https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md学习" target="_blank" rel="external">https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md学习</a></p>
<h3 id="修改package-json">修改package.json</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> "scripts": &#123;</span><br><span class="line">	"<span class="operator"><span class="keyword">start</span><span class="string">": "</span>./node_modules/.<span class="keyword">bin</span>/supervisor ./<span class="keyword">bin</span>/www<span class="string">",</span><br><span class="line"> 	"</span><span class="keyword">test</span><span class="string">": "</span>./node_modules/.<span class="keyword">bin</span>/mocha -u tdd<span class="string">"</span><br><span class="line">&#125;,</span></span></span><br></pre></td></tr></table></figure>
<h3 id="todo">todo</h3><p>@小龙，写成一个一键脚本</p>
<h2 id="test">test</h2><p>TDD 流程是，先编写一个失败测试，然后编写应用代码让测试通过，最后再按需重构代码。因为很多测试工具都使用红色表示失败测试，使用绿色表示通过的测试，所以这个流程有时也叫“遇红-变绿-重构”循环。这一节我们先完成这个循环的第一步，编写一个失败测试，“遇红”。然后在变绿，重构。</p>
<h2 id="创建db/user_model-js">创建<code>db/user_model.js</code></h2><p>此文件里编写用户相关的mongodb操作</p>
<ul>
<li>Schema define</li>
<li>virtual attr</li>
<li>save pre callback</li>
<li>UserSchema.methods</li>
<li>UserSchema.statics</li>
<li>findOne</li>
<li>user hash password with salt</li>
<li>getAuthenticated</li>
</ul>
<h2 id="创建test/user_model-js">创建<code>test/user_model.js</code></h2><p>测试2个方法</p>
<ul>
<li>#save()</li>
<li>#getAuthenticated()</li>
</ul>
<h3 id="测试代码基本结构">测试代码基本结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">describe</span>(<span class="string">'UserModel'</span>, <span class="keyword">function</span>()&#123;</span><br><span class="line">	<span class="keyword">before</span>(<span class="keyword">function</span>() &#123;</span><br><span class="line">    // runs <span class="keyword">before</span> all tests <span class="keyword">in</span> this <span class="keyword">block</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">after</span>(<span class="keyword">function</span>()&#123;</span><br><span class="line">    // runs <span class="keyword">after</span> all tests <span class="keyword">in</span> this <span class="keyword">block</span></span><br><span class="line">  &#125;)</span><br><span class="line">  beforeEach(<span class="keyword">function</span>()&#123;</span><br><span class="line">    // runs <span class="keyword">before</span> <span class="keyword">each</span> <span class="keyword">test</span> <span class="keyword">in</span> this <span class="keyword">block</span></span><br><span class="line">  &#125;)</span><br><span class="line">  afterEach(<span class="keyword">function</span>()&#123;</span><br><span class="line">    // runs <span class="keyword">after</span> <span class="keyword">each</span> <span class="keyword">test</span> <span class="keyword">in</span> this <span class="keyword">block</span></span><br><span class="line">  &#125;)</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">describe</span>(<span class="string">'#save()'</span>, <span class="keyword">function</span>()&#123;</span><br><span class="line">    it(<span class="string">'should return sang_test2 when user save'</span>, <span class="keyword">function</span>(done)&#123;</span><br><span class="line">			。。。</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span></span><br></pre></td></tr></table></figure>
<p>生命周期说明</p>
<ul>
<li>before</li>
<li>after</li>
<li>beforeEach</li>
<li>afterEach</li>
</ul>
<p>上面这段代码是向测试<code>UserModel</code>的<code>#save()</code>方法是否符合需求。</p>
<h3 id="断言">断言</h3><p>断言都是单元测试的核心</p>
<p>断言作为Assert类的静态方法。如果一个断言失败，方法的调用不会返回值，并且会报告一个错误。</p>
<p>如果一个测试包含多个断言，那些紧跟失败断言的断言都不会执行，因为此原因，通常每个测试方法最好只有一个断言。每个方法可以无消息调用，也可以是带有一个简单文本消息调用，或者带有一个消息以及参数调用。在最后一种情况下，使用了一个提供的文本以及参数来格式化消息。</p>
<p>目前流行的断言基本分为3类</p>
<ul>
<li>assert风格</li>
<li>should风格</li>
<li>expect风格</li>
</ul>
<p>没有好坏之分，只是看个人习惯</p>
<p>这里使用chai这个库，它支持3种风格的断言，非常方便</p>
<p>Chai has several interfaces that allow the developer to choose the most comfortable. The chain-capable BDD styles provide an expressive language &amp; readable style, while the TDD assert style provides a more classical feel.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> assert = <span class="built_in">require</span>(<span class="string">'chai'</span>).assert;</span><br><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">'chai'</span>).expect;</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'chai'</span>).should();</span><br></pre></td></tr></table></figure>
<p>具体用法请查看<code>http://chaijs.com/</code>文档</p>
<h2 id="测试命令">测试命令</h2><p>启动mongodb服务</p>
<pre><code>mongod
</code></pre><p>服务器启动</p>
<pre><code><span class="built_in">npm</span> start
</code></pre><p>测试</p>
<pre><code>npm <span class="built_in">test</span>
</code></pre><h2 id="自动测试和代码测试覆盖率法1：基于gulp">自动测试和代码测试覆盖率法1：基于gulp</h2><ul>
<li>auto test</li>
<li>代码测试覆盖率</li>
</ul>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp</span><br><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp-mocha</span><br><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp-istanbul</span><br></pre></td></tr></table></figure>
<p>创建gulpfilejs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> istanbul = <span class="built_in">require</span>(<span class="string">'gulp-istanbul'</span>);</span><br><span class="line"><span class="keyword">var</span> mocha = <span class="built_in">require</span>(<span class="string">'gulp-mocha'</span>); </span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  gulp.src([<span class="string">'db/**/*.js'</span>])</span><br><span class="line">    .pipe(istanbul()) <span class="comment">// Covering files</span></span><br><span class="line">    .on(<span class="string">'finish'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      gulp.src([<span class="string">'test/*.js'</span>])</span><br><span class="line">        .pipe(mocha())</span><br><span class="line">        .pipe(istanbul.writeReports()) <span class="comment">// Creating the reports after tests runned</span></span><br><span class="line">        .on(<span class="string">'end'</span>, cb);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>,[<span class="string">'test'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([<span class="string">'./db/**/*'</span>,<span class="string">'./test/**/*'</span>], [<span class="string">'test'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'watch'</span>,[<span class="string">'test'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([<span class="string">'./db/**/*'</span>,<span class="string">'./test/**/*'</span>], [<span class="string">'test'</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules<span class="regexp">/.bin/gu</span>lp</span><br></pre></td></tr></table></figure>
<p>这时，你试试修改测试或源文件试试，看看会不会自动触发测试</p>
<p>当然，如果你喜欢只是测试一次，可以这样做</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">node_modules</span>/.<span class="keyword">bin/gulp </span>test</span><br></pre></td></tr></table></figure>
<p>如果你不熟悉gulp，可以再这里<a href="https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md学习" target="_blank" rel="external">https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md学习</a></p>
<h2 id="自动测试和代码测试覆盖率法2：基于cli">自动测试和代码测试覆盖率法2：基于cli</h2><p>首先安装依赖npm包</p>
<pre><code>npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> mocha
npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> istanbul
</code></pre><p>在package.json里scripts增加</p>
<pre><code><span class="string">"test"</span>: <span class="string">"./node_modules/.bin/mocha --reporter spec"</span>,
<span class="string">"test-cov"</span>: <span class="string">"istanbul cover node_modules/mocha/bin/_mocha -- --reporter dot"</span>,
<span class="string">"test-travis"</span>: <span class="string">"istanbul cover node_modules/mocha/bin/_mocha --report lcovonly -- --reporter dot"</span>
</code></pre><p>然后测试</p>
<pre><code>npm <span class="keyword">test</span>
npm <span class="keyword">run</span> <span class="keyword">test</span>-cov
npm <span class="keyword">run</span> <span class="keyword">test</span>-travis
</code></pre><p>这里想自动化会有点麻烦，还是建议解除gulp</p>
<p>如果不了npm run命令，请参阅 <a href="https://github.com/i5ting/npm-run-test" target="_blank" rel="external">https://github.com/i5ting/npm-run-test</a></p>
<h2 id="测试相关网址">测试相关网址</h2><ul>
<li><a href="https://github.com/visionmedia/mocha" target="_blank" rel="external">https://github.com/visionmedia/mocha</a></li>
<li><a href="http://visionmedia.github.io/mocha/" target="_blank" rel="external">http://visionmedia.github.io/mocha/</a></li>
<li><a href="http://mochajs.org/" target="_blank" rel="external">http://mochajs.org/</a></li>
<li><a href="https://github.com/chaijs/chai" target="_blank" rel="external">https://github.com/chaijs/chai</a></li>
<li><a href="http://chaijs.com/" target="_blank" rel="external">http://chaijs.com/</a></li>
<li><a href="http://sinonjs.org/" target="_blank" rel="external">http://sinonjs.org/</a></li>
<li><a href="http://zombie.labnotes.org/" target="_blank" rel="external">http://zombie.labnotes.org/</a></li>
<li><a href="https://github.com/tj/supertest（api" target="_blank" rel="external">https://github.com/tj/supertest（api</a> test文档）</li>
<li><a href="https://github.com/tj/superagent/blob/master/test/node/agency.js（api" target="_blank" rel="external">https://github.com/tj/superagent/blob/master/test/node/agency.js（api</a> test示例）</li>
<li><a href="https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md" target="_blank" rel="external">https://github.com/i5ting/js-tools-best-practice/blob/master/doc/Gulp.md</a></li>
<li><a href="https://github.com/SBoudrias/gulp-istanbul" target="_blank" rel="external">https://github.com/SBoudrias/gulp-istanbul</a></li>
</ul>
<h2 id="更多">更多</h2><p>下面概念，请自行了解</p>
<ul>
<li>TDD</li>
<li>BDD</li>
</ul>
<h2 id="Contributing">Contributing</h2><ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am &#39;Add some feature&#39;</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
<h2 id="版本历史">版本历史</h2><ul>
<li>v0.1.0 初始化版本 </li>
</ul>
<h2 id="作者">作者</h2><ul>
<li>桑世龙</li>
<li>柯织</li>
<li>黄小龙</li>
</ul>
<h2 id="欢迎fork和反馈">欢迎fork和反馈</h2><p>在issue提问或邮件shiren1118@126.com</p>
<h2 id="License">License</h2><p>this gem is released under the <a href="http://www.opensource.org/licenses/MIT" target="_blank" rel="external">MIT License</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/11/24/mongoose-test/" data-id="cid190g4p000xam7f9pujw74l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ce-shi-yi-ge-wen-zhang" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/13/ce-shi-yi-ge-wen-zhang/" class="article-date">
  <time datetime="2014-10-12T16:00:00.000Z" itemprop="datePublished">2014-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/13/ce-shi-yi-ge-wen-zhang/">测试MongoDB</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="MongoDB">MongoDB</h1><h2 id="WARNING:_soft_rlimits_too_low”_in_MongoDB_with_Mac_OS_X">WARNING: soft rlimits too low” in MongoDB with Mac OS X</h2><p><a href="http://www.cnblogs.com/wbb2109/p/3991721.html" target="_blank" rel="external">source</a></p>
<p>If you get this warning when you connect to mongo shell in Mac OX X:</p>
<p>** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000<br>A simple way to fix this is setting the limit just before starting mongod with this:</p>
<pre><code><span class="built_in">ulimit</span> -n <span class="number">1024</span> &amp;&amp; mongod
</code></pre><p>Or this:</p>
<pre><code>launchctl limit maxfiles <span class="number">1024</span> <span class="number">1024</span>
</code></pre><p>But if you are running mongo in a development environment this shouldn’t be a problem, you can just ignore it.</p>
<p>This is a temporary and not very pretty fix. To make this permanent you have to add this to the/etc/launchd.conf file:</p>
<pre><code>launchctl limit maxfiles <span class="number">1024</span> <span class="number">1024</span>
</code></pre><p>Now reboot to make changes effective.</p>
<p>You can see the actual values of the limits running this:</p>
<pre><code>$ launchctl limit maxfiles
        maxfiles    <span class="number">1024</span>           <span class="number">1024</span>
</code></pre><p>Remember to restart your mongod process every time you change any value to see if it works.</p>
<h2 id="url">url</h2><p><a href="http://i5ting.com/2014/04/start-a-new-nodejs-the-right-way/" target="_blank" rel="external">http://i5ting.com/2014/04/start-a-new-nodejs-the-right-way/</a></p>
<p><a href="http://mongoosejs.com/docs/index.html" target="_blank" rel="external">http://mongoosejs.com/docs/index.html</a></p>
<h2 id="自动reload代码：supervisor">自动reload代码：supervisor</h2><p>安装</p>
<pre><code>npm <span class="operator"><span class="keyword">install</span> <span class="comment">--save supervisor</span></span>
</code></pre><p>修改package.js</p>
<p>  “scripts”: {<br>    “start”: “./node_modules/.bin/supervisor ./bin/www”<br>  }</p>
<p>然后</p>
<pre><code><span class="built_in">npm</span> start
</code></pre><h2 id="打印错误栈信息:_stackman">打印错误栈信息: stackman</h2><p>He is like Batman, but for Node.js stack traces</p>
<p><a href="https://github.com/watson/stackman" target="_blank" rel="external">https://github.com/watson/stackman</a></p>
<p><a href="http://scotch.io/tutorials/javascript/build-a-restful-api-using-node-and-express-4#route-middleware" target="_blank" rel="external">http://scotch.io/tutorials/javascript/build-a-restful-api-using-node-and-express-4#route-middleware</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/10/13/ce-shi-yi-ge-wen-zhang/" data-id="cid190g4q000yam7f1002nvk2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-welcome-to-jekyll" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/12/welcome-to-jekyll/" class="article-date">
  <time datetime="2014-10-12T14:40:24.000Z" itemprop="datePublished">2014-10-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/jekyll-update/">jekyll update</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/12/welcome-to-jekyll/">Welcome to Jekyll!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>You’ll find this post in your <code>_posts</code> directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run <code>jekyll serve --watch</code>, which launches a web server and auto-regenerates your site when a file is updated.</p>
<p>To add new posts, simply add a file in the <code>_posts</code> directory that follows the convention <code>YYYY-MM-DD-name-of-post.ext</code> and includes the necessary front matter. Take a look at the source for this post to get an idea about how it works.</p>
<p>Jekyll also offers powerful support for code snippets:</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hi</span></span>(name)</span><br><span class="line">  puts <span class="string">"Hi, <span class="subst">#&#123;name&#125;</span>"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">print_hi(<span class="string">'Tom'</span>)</span><br><span class="line"><span class="comment">#=&gt; prints 'Hi, Tom' to STDOUT.</span></span><br></pre></td></tr></table></figure>
<p>Check out the <a href="http://jekyllrb.com" target="_blank" rel="external">Jekyll docs</a> for more info on how to get the most out of Jekyll. File all bugs/feature requests at <a href="https://github.com/jekyll/jekyll" target="_blank" rel="external">Jekyll’s GitHub repo</a>. If you have questions, you can ask them on <a href="https://github.com/jekyll/jekyll-help" target="_blank" rel="external">Jekyll’s dedicated Help repository</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/10/12/welcome-to-jekyll/" data-id="cid190g4r000zam7f11ebvsmd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/12/node/" class="article-date">
  <time datetime="2014-10-12T14:40:24.000Z" itemprop="datePublished">2014-10-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/node-update/">node update</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/12/node/">Welcome to Nodeonly!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.bearfruit.org/2013/06/21/start-a-new-node-js-express-app-the-right-way/" target="_blank" rel="external">原文地址</a></p>
<p>Node.js是极其流行的，且毫无疑问你可以用它可以做任何你见过的不可思议的工作。由于很多新鲜东西，所以入门会比较复杂一些：Node.js是灵活，强大的工具，它可以用于构建很多不同类型的项目，从服务器端应用到网站，到工具，几乎无所不能。当然，它还只是一个迅速串红的新兴的工具，同样一件事儿可以有非常多的办法去做，很难去说会用到什么工具或者流程。</p>
<p>在 Node.js<br>web开发社区有一件事是确定的，有2个经常用于构建新的web应用的库，它们分别是connect<br>和express。<a href="http://www.senchalabs.org/connect/" target="_blank" rel="external">Connect是底层工具</a>让你可以使用http协议或者其他网络协议进行会话。<br><a href="http://expressjs.com/" target="_blank" rel="external">Express让构建好的网站更加简单</a><br>，而且它是构建于Connect库之上的。</p>
<p>接下来我会给你们展示几个技巧，我发现的，可以帮助你们入Express的门，希望以此加快你使用Node构建web应用的速度，我也会通过这个教程作为我已发布的其他教程的入口，我不想告诉你它很难，相反我是试图帮你理解如何处理好。<br>？</p>
<p>当我们学完，我们会有一个express应用，它有 <a href="http://lesscss.org/" target="_blank" rel="external">Less</a>,<br>sessions, <a href="http://visionmedia.github.io/mocha/" target="_blank" rel="external">test runner</a><br>和当文件变动会<br><a href="https://github.com/isaacs/node-supervisor" target="_blank" rel="external">自动reload</a>的功能.<br>在此之前，<a href="http://www.bearfruit.org/2013/06/19/how-to-install-node-js-successfully/" target="_blank" rel="external">请确保你已经安装了Node.js和npm</a>.</p>
<p>Update: Check out an <a href="http://www.bearfruit.org/2013/08/22/a-better-template-engine-for-express-apps/" target="_blank" rel="external">even better template option for Express<br>apps</a>.</p>
<p>我们从<a href="https://npmjs.org/" target="_blank" rel="external">npm, the Node package manager<br>tool</a>开始。当你安装完Node.js后，你可能与此同时已经有了npm。之前曾说过Express是Node.js社区里非常稳定的，而npm是一个更加稳定的，极其少的情况下找一个项目是不依赖它的。</p>
<p>当你创建一个项目的时候，你会创建一个名为package.json的文件，它描述了你的项目和更多重要的易于npm安装你的项目依赖的配置。如你所料，项目使用Express会依赖Express<br>npm模块。</p>
<p>当你通过npm安装一个库，它会安装到项目里你当前所在的目录下，一个名为node_modules的文件。如果你有2个项目，且安装同样的express的时候，这并不意味着你能在不同的项目里使用它们。每个都会独立其他项目有自己的模块。Ruby和Python社区试着放到一起，因为对于早期已存在的部分，它们不会有这样的工具，而Node社区私活从这个挑战有所借鉴，面对和在最初的计划里来避免这些。？</p>
<p>有一种办法来安装node模块，系统范围内，不论如何都可以使用。不使用package.json，我们会通过特殊命令行来安装。现在我们要安装express，我也用下面的命令行工具：</p>
<p>为了做此，必须在控制台可以访问npm，然后使用下面这个命令：</p>
<pre><code>npm <span class="operator"><span class="keyword">install</span> -<span class="keyword">g</span> express</span>
</code></pre><p>如果你用Mac或者Linux会得到一个权限拒绝的错误，之后需要使用<code>sudo npm
install -g
express</code>，这会提示你输入密码，继而此工具才能安装相应安装包。如果你输入了密码，当你使用-g参数的时候，你会经常不得不使用sudo的。</p>
<p>那么到底-g做什么呢？它会全局安装相应安装包的。如果没有使用-g，那么你会在当前所在文件夹里，你会看到新创建的名为node_modules的文件夹，它会安装在node_modules文件夹里。</p>
<p>I learned this the hard way when I was preparing for a flight and a few<br>hours of working offline. I downloaded all the tools I thought I’d need<br>but didn’t use -g. To this day I don’t know what folder I was in but<br>needless to say, I ended up just reading a book during that flight. :-)</p>
<p>现在我们有了全局安装的express，我们可以创建一个新的项目了。在终端里创建一个文件夹，切换到此文件夹。你可以在这个文件夹里。比如：</p>
<p>Mac/Linux/Windows:</p>
<p>mkdir ExpressProject; cd ExpressProjectressProject</p>
<p>现在你已经在你的新文件夹里了，我们会使用express命令来把它转成一个Express项目。</p>
<p>输入<code>express -h</code>后敲回车会看到选项列表。<br>如果你只是敲了express并敲了回车，你会创建一个新的全是默认配置的项目。</p>
<p>我使用的命令是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">express <span class="operator">-s</span> -H -c less</span><br></pre></td></tr></table></figure>
<p>在使用之前，让我来告诉ä=SuperTab(‘n’)<br>   他们都是干什么的吧：</p>
<ul>
<li><code>-s</code> 意思是增加sessions支持,</li>
<li><code>-H</code> 意思是使用<a href="http://twitter.github.io/hogan.js/" target="_blank" rel="external"><code>Hogan.js template
library</code></a>, 此库依赖于<br><a href="http://mustache.github.io/mustache.5.html" target="_blank" rel="external"><code>Mustache</code></a>,</li>
<li>-c less 意思是使用Less，这个css preprocessor（预处理器）。</li>
</ul>
<p>一个非常流行的-H配置项是使用<a href="http://jade-lang.com/" target="_blank" rel="external"><code>Jade</code></a>，它是默认项。所以如果你没有设置<code>-H</code><br>或 <code>-e</code> (<a href="https://github.com/visionmedia/ejs" target="_blank" rel="external"><code>ejs</code></a>) 或 <code>-J</code><br>(<a href="http://james.padolsey.com/javascript/introducing-jshtml/" target="_blank" rel="external"><code>JSHtml</code></a>)<br>你就会默认使用Jade的。本教程里我将在我的网站上使用Hogan.js。</p>
<p>如果你喜欢CSS，但是希望它可以有点更强大，此时Less无疑是一个非常好的选择。如果仅仅是写普通的CSS，你只需要给它一个<code>.less</code>扩展名，这个应用会自动为你把它转成CSS的。</p>
<p>如果你不喜欢CSS，希望你的样式看起来有点想Python或者Ruby，你可能更喜欢<br><code>-c stylus</code>选项来增加 Stylus<br>support//learnboost.github.io/stylus/”&gt;Stylus<br>support.本教程所做的网站会使用Less或者普通的CSS。</p>
<p>如果你所在的当前目录不为空，此时使用express命令会引起错误的。它会询问你想如何处理，他还重写相同的所有文件的。遇到此种情况的时候你可以输入“yes”<br>or “no”</p>
<p>至此我们已经有一个express基础应用了，我们需要去安装它的依赖库。输入<code>npm
install</code><br>，并查看屏幕滚动，模块会被下载和安装。你会看到警告，可以无视。如果你看到错误，npm会停止的。</p>
<p>现在我们可以运行我们的测试应用，并保证它是正常可用的。输入 <code>npm start</code><br>开始。</p>
<p>如果你用的是Windows，你可能会看到防火墙警告信息如下：</p>
<p><img src="http://www.bearfruit.org/files/2013/06/e5b12b50-538a-47bf-9cf7-11d7a7ae5ab3.png" alt=""></p>
<p>我建议把第一个选项选中，并点击“Allow<br>access”。如果不这样做的话，你无法在本地简化开发的。如果你经常在咖啡厅或者机场或者其他工作场所，或者可能使用移动设备上测试，此时的网络场景下，你需要保证第二个选项也选中。</p>
<p>无论你用什么样的操作系统，之后你都会看到一条消息，Express会监听3000端口。访问<br><a href="http://localhost:3000/" target="_blank" rel="external">http://localhost:3000/</a>就可以看到你的应用了。需要说明的是Internet<br>Explorer<br>下你必须在最开始的地方输入<code>http://</code>。如果你使用IE浏览器，你也可能看到下面这个弹出框：</p>
<p><img src="http://www.bearfruit.org/files/2013/06/4daae001-35d3-4243-bf36-dcab0306fa5a.png" alt=""></p>
<p>我会选 “Yes” ，因为我想有更多访问。我相信自己本地跑的代码。</p>
<p>现在你会看到基本上空的web页面上写着“Express, Welcome to Express”</p>
<p>现在，我们开始定制吧。别怕，很简单的！</p>
<p>回到终端里，按下 <code>ctrl+C</code><br>来终止Node.js服务器。现在，使用一个代码编辑器如Sublime Text, Notepad++,<br>gEdit or Text<br>Wrangler等任意一个，打开package.json。如扩展名所示，这是一个Json文档。他看起来像Javascript。注意下面这段是控制依赖的：</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"dependencies"</span>: &#123;</span><br><span class="line">  <span class="string">"express"</span>: <span class="string">"3.2.6"</span>,</span><br><span class="line">  <span class="string">"hjs"</span>: <span class="string">"*"</span>,</span><br><span class="line">  <span class="string">"less-middleware"</span>: <span class="string">"*"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们需要做的是在此处增加一些东西来让我们的app更好。尤其是我们要增加代码测试运行器和当文件变动后自动重载app的功能。</p>
<p>我们会在express之前增加如下行：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"mocha"</span>: <span class="string">"*"</span>,</span><br><span class="line"><span class="string">"chai"</span>: <span class="string">"*"</span>,</span><br><span class="line"><span class="string">"sinon"</span>: <span class="string">"*"</span>,</span><br><span class="line"><span class="string">"supervisor"</span>: <span class="string">"*"</span>,</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"mocha"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"chai"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"sinon"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"supervisor"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"express"</span>: <span class="string">"3.x"</span>,</span><br><span class="line">    <span class="string">"hjs"</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="string">"less-middleware"</span>: <span class="string">"*"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请注意每一个都必须以逗号结束，最后一行除外。一旦你这做了，保存变更，并退出编辑器。</p>
<p>返回到你的终端，使用<code>npm
install</code>来安装新的依赖。等待所有新的依赖加载完成。</p>
<p>我们要安装是supervisor，它是Node.js启动检查文件变动的，当他们变动了，它就会自动重载本地服务器。当你经常变动和预览结果的时候，这是非常有用的。然后如果你工作在一个需要在内存里存储信息的应用的时候，当你需要重启应用的时候，一定要注意，它也是会刷新内存的。</p>
<p>我们已经安装了Mocha test runner,  <a href="http://chaijs.com/" target="_blank" rel="external">chai assertion<br>library</a> 和 the <a href="http://sinonjs.org/" target="_blank" rel="external">sinon mocking/stubbing<br>library</a>。它们都是帮助你测试代码的。</p>
<p>让我们来测试一下新功能吧。从supervisor开始。</p>
<p>Mac/Linux: <code>./node_modules/.bin/supervisor app.js</code></p>
<p>Windows: <code>node_modules\.bin\supervisor app.js</code></p>
<p>你会再次看到的你的“Express server listening on port<br>3000″。在浏览器里确保它是正常运行的。</p>
<p>假设正常运行，让我们把它当成默认的，再次编辑你的package.json文件，注意“scripts”<br>部分。此时改为如下：</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"node app.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>之前用的命令放到引号中。注意windows用户要增加额外的<code>\</code>。你最终的结果应如下：</p>
<p>Mac/Linux:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"./node_modules/.bin/supervisor app.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Windows: (note the double \)</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"start"</span>: <span class="string">"node_modules\\.bin\\supervisor app.js"</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>现在保存并退出，返回到终端里，输入<code>npm start</code>来启动你的应用。</p>
<p>棒极了，让我们来做些测试吧。创建一个名为test的文件夹，并创建一个名为test.js的新文件。在你的代码编辑器里编辑此文件，增加如下代码：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var <span class="built_in">assert</span> = <span class="built_in">require</span>(<span class="string">'chai'</span>).<span class="built_in">assert</span>;</span><br><span class="line">var routes = <span class="built_in">require</span>(<span class="string">'../routes'</span>);</span><br><span class="line"></span><br><span class="line">suite(<span class="string">'Routes'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">     test(<span class="string">"index route is defined"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</span><br><span class="line">          <span class="built_in">assert</span>.isDefined(routes.index);</span><br><span class="line">     &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>现在可以保存和关闭文件了。通过运行如下命令来测试：</p>
<p>Mac/Linux: <code>./node_modules/.bin/mocha -u tdd</code></p>
<p>Windows: <code>node_modules\.bin\mocha -u tdd</code></p>
<p>你会看到一行绿色消息说1个通过</p>
<p>我们来让生活更精简一点，编辑你的package.json文件，找到“start”行并复制它。保证第一行后面有逗号哦。修改第二个配置项，从<br>“start” 改为<br>“test”，之后使用此命令来覆盖引号里的命令。你应该和下面一模一样才对：</p>
<p>Mac/Linux:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "<span class="operator"><span class="keyword">start</span><span class="string">": "</span>./node_modules/.<span class="keyword">bin</span>/supervisor app.js<span class="string">",</span><br><span class="line">  "</span><span class="keyword">test</span><span class="string">": "</span>./node_modules/.<span class="keyword">bin</span>/mocha -u tdd<span class="string">"</span><br><span class="line">&#125;,</span></span></span><br></pre></td></tr></table></figure>
<p>Windows: (note the double \)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "<span class="operator"><span class="keyword">start</span><span class="string">": "</span>node_modules\\.<span class="keyword">bin</span>\\supervisor app.js<span class="string">",</span><br><span class="line">  "</span><span class="keyword">test</span><span class="string">": "</span>node_modules\\.<span class="keyword">bin</span>\\mocha -u tdd<span class="string">"</span><br><span class="line">&#125;,</span></span></span><br></pre></td></tr></table></figure>
<p>现在保存并退出，让我们来使用<code>npm
test</code>来测试吧.你会得到和之前测试一样的结果。</p>
<p>我们做的是创建一个test目录，并在它里面创建一个带有单一测试套件的测试文件，并且在此套件里有一个测试。</p>
<p>如果你喜欢的话，你可以在“watch”支持的尾部增加<code>-w</code>。这会导致它每一次文件变动都重跑一次测试。</p>
<p>简单说明一下，chai库支持3种不同的assertion框架。我更喜欢<a href="http://chaijs.com/api/assert/" target="_blank" rel="external">jUnit style TDD<br>assertions</a>。一些人更喜欢BDD样式的assertions，而其他人喜欢expect样式的。自己选择吧。</p>
<p>至此，已经没有什么可以阻挡你了。你可以编辑routes/index.js文件来给你的主页增加一些默认行为，或放置public/目录下的静态文件可直接使用。例如，你可以创建一个新的html文件保存为public/new.html，之后访问<a href="http://localhost:3000/new.html瞧瞧看吧。" target="_blank" rel="external">http://localhost:3000/new.html瞧瞧看吧。</a></p>
<p>不要忘记了你的测试。你可以给已有测试套件增加更多测试或创建一个附加测试套件的新文件。</p>
<p>更新说明：在你学习更加深入之前，请查阅<a href="http://www.bearfruit.org/2013/08/22/a-better-template-engine-for-express-apps/" target="_blank" rel="external">even better template option for<br>Express<br>apps</a>.</p>
<p>为了便于参考，下面是我的最终版本的package.json文件。这是Windows下的例子哦：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"application-name"</span></span>,</span><br><span class="line">  "<span class="attribute">version</span>": <span class="value"><span class="string">"0.0.1"</span></span>,</span><br><span class="line">  "<span class="attribute">private</span>": <span class="value"><span class="literal">true</span></span>,</span><br><span class="line">  "<span class="attribute">scripts</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">start</span>": <span class="value"><span class="string">"node_modules\\.bin\\supervisor app.js"</span></span>,</span><br><span class="line">    "<span class="attribute">test</span>": <span class="value"><span class="string">"node_modules\\.bin\\mocha -u tdd"</span></span><br><span class="line">  </span>&#125;</span>,</span><br><span class="line">  "<span class="attribute">dependencies</span>": <span class="value">&#123;</span><br><span class="line">     "<span class="attribute">mocha</span>": <span class="value"><span class="string">"*"</span></span>,</span><br><span class="line">     "<span class="attribute">chai</span>": <span class="value"><span class="string">"*"</span></span>,</span><br><span class="line">     "<span class="attribute">sinon</span>": <span class="value"><span class="string">"*"</span></span>,</span><br><span class="line">     "<span class="attribute">supervisor</span>": <span class="value"><span class="string">"*"</span></span>,</span><br><span class="line">     "<span class="attribute">express</span>": <span class="value"><span class="string">"3.x"</span></span>,</span><br><span class="line">     "<span class="attribute">hjs</span>": <span class="value"><span class="string">"*"</span></span>,</span><br><span class="line">     "<span class="attribute">less-middleware</span>": <span class="value"><span class="string">"*"</span></span><br><span class="line">  </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Matthew_Nuzum">Matthew Nuzum</h2><p>Web guy, big thinker, loves to talk and write. Front end web, mobile and<br>UX developer for John Deere ISG. My projects: @dsmwebgeeks @tekrs<br>@squaretap ✝</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/10/12/node/" data-id="cid190g4x0012am7frfactbjm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/jekyll-update/">jekyll update</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-update/">node update</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/08/07/mongoose-cli/">mongoose-cli</a>
          </li>
        
          <li>
            <a href="/2015/07/12/to-us/">良苦用心几人懂</a>
          </li>
        
          <li>
            <a href="/2015/07/07/gulp-in-action/">gulp结构化</a>
          </li>
        
          <li>
            <a href="/2015/07/07/npm-postinstall/">从npm tips到express插件机制设计</a>
          </li>
        
          <li>
            <a href="/2015/07/04/mongo-paging/">mongodb分页优化</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>